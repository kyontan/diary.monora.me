# 2018-07-12 (Thu)

## 天気

- 晴れのち雨のち晴れ
  - 夕方に雨が降っていないのに大雨警報が出てその後軽く降ってた

## 時系列

- 15:00: 起床
- 15:30 - 19:00: 研究
- 19:00 - 19:30: 夕飯
- 19:30 - 29:30: 研究

## 雑感

### 研究

とりあえずできることがたくさんあるので進めていたら完全に進捗が出て笑顔になった。
クソみたいなシェルスクリプトとかRubyを書いていて、完全にあとで読めなくなると困るので分割したりし始めた。

ほぼ任意の作業でシェルを叩いていて、便利CLIツールを求めて常にさまよっている。

モダンな `parallel` コマンドないかなーって思っていたら [rush](https://github.com/shenwei356/rush) というのがあった。
地味に `xargs -I{}` +αみたいな置換があって便利。独自形式だけど可読性はそこまで落ちないし良いですね。

面倒くさい正規表現を書いていたらまた時間が溶けた。
`/\A(?<g>(?<w>[^\(\)\{\}\[\]]*+)(?:\(\g<g>*\)|\{\g<g>*\}|\[\g<g>*\])*)\g<w>\z`
括弧の対応を見る+αみたいなことをするために書いたんだけれど、Rubyの正規表現で再帰ができるからってやるべきではないことが分かる。
そもそも括弧の対応を見る方法をエレガントに書くのは難しい気がする。再帰関数でやれば多分できるんだろうけど。
多分CとかGoとかで書くとそれっぽく見える関数が書ける気がするけど、Rubyで綺麗に書けるかと言われると微妙な気がする。向き不向き。

Ruby、文字列とか列挙できる任意の扱いに強いと思っているけれど、それらを入れ替えたりするのは手続き的になってしまって綺麗じゃない気がする。
`Enumerable` メソッドチェーン原理主義。`yield_self` は便利。

データ整形、ある程度慣れてるつもりはあるけど、やはり使い回せる形式に落とすこむのは難しい。
デシリアライズしづらい形式にシリアライズするのをやめろ、1日前の自分に言ってやりたい。

そのうち直す。

## 明日

朝早いらしい。寝られるのか?起きられるのか?
